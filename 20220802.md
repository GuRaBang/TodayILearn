# 브라우저 동작원리

## 브라우저 렌더링

-url의 호스트 이름을 DNS서버를 통해 IP주소로 변환한다. 

-해당 IP주소를 갖는 서버에게 리소스를 요청하고 응답받는다.(HTML, CSS, 이미지 등등) 

-렌더링 엔진은 HTML과 CSS를 파싱하여 DOM과 CSSOM을 생성하고 결합하여 렌더트리를 생성한다. 

-자바스크립트 엔진은 자바스크립트를 실행하여 변경된 DOM과 CSSOM을 다시 렌더트리로 결합한다. 

-렌더트리를 기반으로 페인팅하여 브라우저 화면에 보여준다. 

좀 더 정확히 이야기하면 HTML파싱 도중에 외부 리소스를 로드하는 태그, 예를 들어 link, script, img 태그를 만나면 파싱을 중단하고 리소스 파일을 서버로 요청한다. 

## 자바스크립트 파싱

렌더링 엔진과 자바스크립트 엔진은 순차적으로(동기적으로) 파싱을 수행하기 때문에 스크립트 태그의 위치가 중요하다. 

1. default(동기)

DOM이 완성되지 않은 상태에서 DOM을 조작하면 에러가 발생할 수 있다. 따라서 동기적으로 동작하는 경우 body 가장 아래에 위치시키는 것이 좋다. 왜냐하면 이미 DOM 생성이 완료되었기 때문에 DOM 조작했을 때 에러가 발생할 우려가 없고, 페이지 로딩 시간이 단축되기 때문이다.

HTML5부터 HTML파싱과 자바스크립트 파일 로드를 비동기적으로 동작할 수 있도록 script태그에 async, defer어트리뷰트가 추가되었다. 두 속성 모두 비동기적으로 동작한다는 공통점이 있지만 자바스크립트 실행시점에 차이가 있다. 

1. async(비동기)

자바스크립트 실행은 스크립트 태그 순서와 상관없이 파일 로드가 완련된 직후 진행된다. 

1. defer(비동기)

HTML파싱이 완료된 직후 스크립트 태그 순서에 따라 자바스크립트를 실행한다. 

따라서 async는 순서 보장이 필요없는 경우 사용하고 defer는 순서가 중요한 경우 사용한다.   

## 면접대비 후기

1. 질문을 들었을 때 당연히 질문에 대한 대답만 하면 되겠다 생각했는데, 단순히 설명에서 끝나는 것이 아니라 내 경험과 관련지어서 관심이 있다는 것을 어필하는 것이 중요하다. (e.g. 최근에 관심이 있어서 찾아보고 실험을 해봤는데~, 관련 프로젝트를 한 경험이 있는데~)
2. 어려운 용어를 사용하는 것이 중요한 게 아니라 상대방이 이해하기 쉽도록 설명하는 게 중요하다. (용어를 나열해도 설명하는 것을 들어보면 빈 깡통인게 드러난다)

결론적으로 HTML/CSS, Javascript부터 개념 정리를 다시 하면서 설명하는 연습을 많이 해야겠다. 설명 그대로 외우는 것이 아니라 내 방식대로 말하는 연습이 필요할 것 같다. 시간이 부족하니 효율적으로 쓸 수 있게 계획부터 세워야겠다.
